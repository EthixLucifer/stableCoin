<svg viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="650" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">N2USD Stablecoin System: Contract Interactions &amp; Value Flow</text>
  
  <!-- Collateral Management Group -->
  <rect x="30" y="80" width="280" height="230" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="8" ry="8" opacity="0.8"/>
  <text x="170" y="105" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1565c0">Collateral Management</text>
  
  <!-- Reserves Contract -->
  <rect x="90" y="120" width="160" height="80" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="5" ry="5"/>
  <text x="170" y="165" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Reserves.sol</text>
  
  <!-- Stable Collateral -->
  <rect x="60" y="220" width="100" height="60" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" rx="5" ry="5"/>
  <text x="110" y="250" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">USDT.sol</text>
  <text x="110" y="270" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Stable)</text>
  
  <!-- Unstable Collateral -->
  <rect x="180" y="220" width="100" height="60" fill="#e1f5fe" stroke="#03a9f4" stroke-width="2" rx="5" ry="5"/>
  <text x="230" y="250" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">WETH/N2DR</text>
  <text x="230" y="270" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Unstable)</text>
  
  <!-- Price Information Group -->
  <rect x="30" y="340" width="280" height="130" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="8" ry="8" opacity="0.8"/>
  <text x="170" y="365" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2e7d32">Price Information</text>
  
  <!-- Price Oracle -->
  <rect x="90" y="380" width="160" height="70" fill="#c8e6c9" stroke="#388e3c" stroke-width="2" rx="5" ry="5"/>
  <text x="170" y="415" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">PriceOracle.sol</text>
  <text x="170" y="435" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Chainlink/Custom)</text>
  
  <!-- Peg Mechanism Group -->
  <rect x="330" y="180" width="240" height="180" fill="#fff3e0" stroke="#ff9800" stroke-width="2" rx="8" ry="8" opacity="0.8"/>
  <text x="450" y="205" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#e65100">Peg Mechanism</text>
  
  <!-- Governance Contract -->
  <rect x="370" y="220" width="160" height="120" fill="#ffe0b2" stroke="#f57c00" stroke-width="2" rx="5" ry="5"/>
  <text x="450" y="270" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Governance.sol</text>
  <text x="450" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Peg Stabilization)</text>
  
  <!-- Stablecoin Issuance Group -->
  <rect x="590" y="180" width="240" height="180" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="8" ry="8" opacity="0.8"/>
  <text x="710" y="205" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#6a1b9a">Stablecoin Issuance</text>
  
  <!-- N2USD Contract -->
  <rect x="630" y="220" width="160" height="120" fill="#e1bee7" stroke="#8e24aa" stroke-width="2" rx="5" ry="5"/>
  <text x="710" y="270" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">N2USD.sol</text>
  <text x="710" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(Stablecoin Token)</text>
  
  <!-- User Interactions Group -->
  <rect x="330" y="400" width="500" height="140" fill="#fce4ec" stroke="#e91e63" stroke-width="2" rx="8" ry="8" opacity="0.8"/>
  <text x="580" y="425" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#c2185b">User Interactions</text>
  
  <!-- User -->
  <circle cx="580" cy="480" r="40" fill="#f8bbd0" stroke="#d81b60" stroke-width="2"/>
  <text x="580" y="485" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">Users</text>
  
  <!-- Arrows for Value Flow -->
  <!-- Stable Collateral to Reserves -->
  <path d="M110,220 L110,200 L170,200 L170,200" stroke="#0277bd" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="140" y="195" font-family="Arial, sans-serif" font-size="10" fill="#0277bd">Deposit</text>
  
  <!-- Unstable Collateral to Reserves -->
  <path d="M230,220 L230,200 L170,200" stroke="#0277bd" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="210" y="195" font-family="Arial, sans-serif" font-size="10" fill="#0277bd">Deposit</text>
  
  <!-- Reserves to Governance -->
  <path d="M250,160 C300,160 350,250 370,270" stroke="#0277bd" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="290" y="200" font-family="Arial, sans-serif" font-size="10" fill="#0277bd">Collateral Info</text>
  
  <!-- Price Oracle to Governance -->
  <path d="M250,410 C300,410 350,330 370,290" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="300" y="380" font-family="Arial, sans-serif" font-size="10" fill="#2e7d32">Price Data</text>
  
  <!-- Governance to N2USD (Mint/Burn) -->
  <path d="M530,270 L630,270" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="580" y="260" font-family="Arial, sans-serif" font-size="10" fill="#e65100">Mint/Burn</text>
  
  <!-- Governance to Governance (Validate Peg) -->
  <path d="M450,340 C450,370 500,370 500,340 L500,310" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="475" y="375" font-family="Arial, sans-serif" font-size="10" fill="#e65100">Validate Peg</text>
  
  <!-- User to N2USD -->
  <path d="M610,450 L670,340" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="650" y="410" font-family="Arial, sans-serif" font-size="10" fill="#c2185b">Buy/Sell/Transfer</text>
  
  <!-- User to Governance -->
  <path d="M550,450 L490,340" stroke="#c2185b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="510" y="410" font-family="Arial, sans-serif" font-size="10" fill="#c2185b">Governance Actions</text>
  
  <!-- Legend -->
  <rect x="600" y="80" width="270" height="80" fill="#ffffff" stroke="#757575" stroke-width="1" rx="5" ry="5"/>
  <text x="735" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Legend</text>
  
  <line x1="620" y1="120" x2="640" y2="120" stroke="#0277bd" stroke-width="2"/>
  <text x="730" y="125" font-family="Arial, sans-serif" font-size="12" fill="#333">Collateral Flow</text>
  
  <line x1="620" y1="145" x2="640" y2="145" stroke="#e65100" stroke-width="2"/>
  <text x="735" y="150" font-family="Arial, sans-serif" font-size="12" fill="#333">Stabilization Operations</text>
  
  <!-- Note on Options -->
  <rect x="30" y="490" width="280" height="110" fill="#ffffff" stroke="#757575" stroke-width="1" rx="5" ry="5"/>
  <text x="170" y="510" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Implementation Options</text>
  <text x="45" y="530" font-family="Arial, sans-serif" font-size="12" fill="#333">Option A: WETH + Chainlink Oracle</text>
  <text x="45" y="550" font-family="Arial, sans-serif" font-size="12" fill="#333">Option B: N2DR + Custom Price Feed</text>
  <text x="45" y="570" font-family="Arial, sans-serif" font-size="12" fill="#333">Both maintain peg through rebalancing</text>
  
  <!-- System Features -->
  <rect x="330" y="560" width="500" height="60" fill="#e0f7fa" stroke="#00bcd4" stroke-width="1" rx="5" ry="5"/>
  <text x="580" y="580" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#006064">System Features</text>
  <text x="400" y="600" font-family="Arial, sans-serif" font-size="12" fill="#333">• Automatic collateral rebalancing</text>
  <text x="650" y="600" font-family="Arial, sans-serif" font-size="12" fill="#333">• Price-pegged stability mechanism</text>
  
  <!-- Arrowhead Marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000"/>
    </marker>
  </defs>
</svg>
